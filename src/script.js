const translations = {
  en: {
    "brand.role": "Senior Software Engineer & Architect",
    "brand.tagline": "Designing and building distributed, messaging and cloud-based systems across banking, insurance, telecom, transport and more.",
    "nav.about": "About",
    "nav.experience": "Experience",
    "nav.cv": "Full CV",
    "nav.contact": "Contact",
    "hero.title": "Senior Software Engineer & Architect",
    "hero.subtitle": "Experienced in designing and delivering complex software systems: distributed back-ends, messaging platforms, APIs, cloud-native services and enterprise integrations.",
    "hero.ctaExperience": "View experience timeline",
    "hero.ctaCv": "Jump to full CV",
    "contact.title": "Contact",
    "contact.phoneTn": "Phone",
    "card.skillsTitle": "Skills & Technologies",
    "card.skillsText": "Deep experience with Microsoft .NET, messaging systems, APIs, integration, cloud, enterprise architectures and software craftsmanship.",
    "card.experienceTitle": "Domains & Industries",
    "card.experienceText": "Projects across banking, insurance, asset management, telecom, agriculture, transport, call-center systems and pharmaceutical supply chains.",
    "card.languagesTitle": "Languages",
    "card.languagesText": "English and French CV content, with Arabic interface support. Use the language switch above to change interface language.",
    "timeline.title": "Experience timeline",
    "timeline.note": "High-level overview of roles and missions. Full project details are available in the CV section below.",
    "cv.title": "Full CV",
    "cv.intro": "The following sections contain the full CV content in English and in French. English uses the English CV file and translated experience blocks; French uses the original French CV plus the detailed missions.",
    "cv.enTitle": "English CV",
    "cv.enMainTitle": "Complete English CV",
    "cv.enRecentTitle": "Recent missions",
    "cv.frTitle": "French CV",
    "cv.frMainTitle": "Complete French CV",
    "cv.frRecentTitle": "Recent missions (FR)"
  },
  fr: {
    "brand.role": "Ingénieur logiciel senior & architecte",
    "brand.tagline": "Conception et réalisation de systèmes distribués, de plateformes de messagerie et de solutions orientées cloud dans la banque, l’assurance, les télécoms, le transport et plus encore.",
    "nav.about": "À propos",
    "nav.experience": "Expérience",
    "nav.cv": "CV complet",
    "nav.contact": "Contact",
    "hero.title": "Ingénieur logiciel senior & architecte",
    "hero.subtitle": "Expérience dans la conception et la livraison de systèmes logiciels complexes : back-ends distribués, plateformes de messagerie, API, services cloud-native et intégrations d’entreprise.",
    "hero.ctaExperience": "Voir la frise d’expérience",
    "hero.ctaCv": "Aller au CV complet",
    "contact.title": "Contact",
    "contact.phoneTn": "Téléphone",
    "card.skillsTitle": "Compétences & technologies",
    "card.skillsText": "Forte expérience sur Microsoft .NET, systèmes de messagerie, API, intégration, cloud, architectures d’entreprise et qualité logicielle.",
    "card.experienceTitle": "Secteurs & domaines",
    "card.experienceText": "Projets dans la banque, l’assurance, la gestion d’actifs, les télécoms, l’agriculture, le transport, les centres d’appels et la chaîne d’approvisionnement pharmaceutique.",
    "card.languagesTitle": "Langues",
    "card.languagesText": "Contenu du CV en anglais et en français, avec interface en arabe. Utilisez le sélecteur de langue ci-dessus pour changer la langue de l’interface.",
    "timeline.title": "Frise chronologique d’expérience",
    "timeline.note": "Vue synthétique des postes et missions. Les détails complets des projets se trouvent dans la section CV ci-dessous.",
    "cv.title": "CV complet",
    "cv.intro": "Les sections suivantes contiennent le texte intégral du CV en anglais et en français. La version anglaise utilise le fichier CV anglais et des blocs d’expérience traduits ; la version française utilise le CV original en français et les missions détaillées.",
    "cv.enTitle": "CV anglais",
    "cv.enMainTitle": "CV anglais complet",
    "cv.enRecentTitle": "Missions récentes (version EN)",
    "cv.frTitle": "CV français",
    "cv.frMainTitle": "CV complet (version française)",
    "cv.frRecentTitle": "Missions récentes"
  },
  ar: {
    "brand.role": "مهندس برمجيات أول ومهندس حلول",
    "brand.tagline": "تصميم وتطوير أنظمة موزعة، ومنصات مراسلة، وخدمات سحابية في مجالات البنوك، التأمين، الاتصالات، النقل وغيرها.",
    "nav.about": "نبذة",
    "nav.experience": "الخبرة",
    "nav.cv": "السيرة الذاتية الكاملة",
    "nav.contact": "التواصل",
    "hero.title": "مهندس برمجيات أول ومهندس حلول",
    "hero.subtitle": "خبرة في تصميم وتسليم أنظمة برمجية معقدة: back-ends موزعة، منصات مراسلة، واجهات برمجة تطبيقات، خدمات سحابية وتكاملات على مستوى المؤسسات.",
    "hero.ctaExperience": "عرض التسلسل الزمني للخبرة",
    "hero.ctaCv": "الانتقال إلى السيرة الذاتية الكاملة",
    "contact.title": "التواصل",
    "contact.phoneTn": "الهاتف",
    "card.skillsTitle": "المهارات والتقنيات",
    "card.skillsText": "خبرة واسعة في Microsoft .NET وأنظمة المراسلة وواجهات البرمجة والتكامل والحلول السحابية والهندسة المعمارية للمؤسسات وجودة البرمجيات.",
    "card.experienceTitle": "القطاعات والمجالات",
    "card.experienceText": "مشاريع في مجالات البنوك والتأمين وإدارة الأصول والاتصالات والزراعة والنقل وأنظمة مراكز الاتصال وسلاسل التوريد الدوائية.",
    "card.languagesTitle": "اللغات",
    "card.languagesText": "محتوى السيرة الذاتية بالإنجليزية والفرنسية مع واجهة عربية. استخدم اختيار اللغة في الأعلى لتغيير لغة الواجهة.",
    "timeline.title": "الخط الزمني للخبرة",
    "timeline.note": "عرض عام للوظائف والمهام. تفاصيل المشاريع الكاملة متاحة في قسم السيرة الذاتية أدناه.",
    "cv.title": "السيرة الذاتية الكاملة",
    "cv.intro": "تحتوي الأقسام التالية على النص الكامل للسيرة الذاتية بالإنجليزية والفرنسية. النسخة الإنجليزية تستخدم ملف السيرة الذاتية بالإنجليزية مع كتل خبرة مترجمة، والنسخة الفرنسية تستخدم السيرة الذاتية الأصلية بالفرنسية مع المهام المفصلة.",
    "cv.enTitle": "السيرة الذاتية بالإنجليزية",
    "cv.enMainTitle": "السيرة الذاتية الكاملة (إنجليزي)",
    "cv.enRecentTitle": "المهام الأخيرة (نسخة EN)",
    "cv.frTitle": "السيرة الذاتية بالفرنسية",
    "cv.frMainTitle": "السيرة الذاتية الكاملة (فرنسي)",
    "cv.frRecentTitle": "المهام الأخيرة"
  }
};

function setLanguage(lang) {
  const dict = translations[lang];
  if (!dict) return;

  document.documentElement.lang = lang === "ar" ? "ar" : lang;
  document.documentElement.dir = lang === "ar" ? "rtl" : "ltr";

  document.body.classList.toggle("lang-en", lang === "en");
  document.body.classList.toggle("lang-fr", lang === "fr");
  document.body.classList.toggle("lang-ar", lang === "ar");

  document.querySelectorAll("[data-i18n]").forEach((el) => {
    const key = el.getAttribute("data-i18n");
    if (dict[key]) {
      el.textContent = dict[key];
    }
  });

  document.querySelectorAll(".lang-btn").forEach((btn) => {
    const isActive = btn.getAttribute("data-lang") === lang;
    btn.classList.toggle("active", isActive);
    btn.setAttribute("aria-pressed", String(isActive));
  });
}

document.addEventListener("DOMContentLoaded", () => {
  const navToggle = document.querySelector(".nav-toggle");
  const nav = document.querySelector(".nav");
  if (navToggle && nav) {
    navToggle.addEventListener("click", () => {
      nav.classList.toggle("open");
    });
    nav.querySelectorAll("a").forEach((link) => {
      link.addEventListener("click", () => nav.classList.remove("open"));
    });
  }

  document.querySelectorAll(".lang-btn").forEach((btn) => {
    btn.addEventListener("click", () => {
      const lang = btn.getAttribute("data-lang");
      setLanguage(lang);
    });
  });

  setLanguage("en");
});